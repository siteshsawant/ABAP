  method IF_EX_NOTIF_EVENT_SAVE~CHANGE_DATA_AT_SAVE.
DATA: LT_M1 TYPE ZSPM_MAILBODY.
     " LT_MTF TYPE TABLE OF ZSPM_MAILBODY.
DATA: HEADER TYPE STRING,
      FOOTER TYPE STRING,
      FOOTER2 TYPE STRING.

          FOOTER = 'Please access the Notification with IW22 or IW28 T Code in SAP using above Notification Number.'.
          FOOTER2 = 'Thank you'.

CASE FLT_VAL.
  WHEN 'M1'.
    LT_M1-QMNUM = CS_VIQMEL-QMNUM.
        LT_M1-QMTXT = CS_VIQMEL-QMTXT.
        LT_M1-SWERK = CS_VIQMEL-SWERK.
        LT_M1-EQUNR = CS_VIQMEL-EQUNR.
        SELECT SINGLE EQKTX FROM EQKT INTO LT_M1-EQKTX WHERE EQUNR = CS_VIQMEL-EQUNR AND SPRAS = 'EN'.
        LT_M1-TPLNR = CS_VIQMEL-TPLNR.
        SELECT SINGLE PLTXT FROM IFLOTX INTO LT_M1-PLTXT WHERE TPLNR = CS_VIQMEL-TPLNR AND SPRAS = 'EN'.
        LT_M1-AUSVN = CS_VIQMEL-AUSVN.
        LT_M1-AUZTV = CS_VIQMEL-AUZTV.
       " APPEND LT_M1 TO LT_MTF.
        HEADER = 'A Break down Notification is created and please find the below details.'.
        SKIP TO LINE 41.
  WHEN 'M2'.
        LT_M1-QMNUM = CS_VIQMEL-QMNUM.
        LT_M1-QMTXT = CS_VIQMEL-QMTXT.
        LT_M1-SWERK = CS_VIQMEL-SWERK.
        LT_M1-EQUNR = CS_VIQMEL-EQUNR.
        SELECT SINGLE EQKTX FROM EQKT INTO LT_M1-EQKTX WHERE EQUNR = CS_VIQMEL-EQUNR AND SPRAS = 'EN'.
        LT_M1-TPLNR = CS_VIQMEL-TPLNR.
        SELECT SINGLE PLTXT FROM IFLOTX INTO LT_M1-PLTXT WHERE TPLNR = CS_VIQMEL-TPLNR AND SPRAS = 'EN'.
       " APPEND LT_M1 TO LT_MTF.
        HEADER = 'A Maintenance Request is raised and please find the below details.'.

  WHEN OTHERS.
    SKIP.
ENDCASE.


BREAK-POINT.


  endmethod.
